<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‚¬ãƒãƒ£ãã˜ã‚¢ãƒ‹ãƒ¡</title>
<style>
body{
  margin:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  background:linear-gradient(135deg,#aee,#fdd);
  font-family:sans-serif;
  overflow:hidden;
}

/* é€æ˜ãƒœãƒƒã‚¯ã‚¹ */
.box{
  position:relative;
  width:300px;
  height:220px;
  border:3px solid rgba(255,255,255,0.7);
  background:rgba(255,255,255,0.25);
  border-radius:16px;
  backdrop-filter:blur(6px);
  overflow:hidden;
  margin-bottom:16px;
}

/* ãƒœãƒ¼ãƒ« */
.ball{
  position:absolute;
  width:50px;
  height:50px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
  font-weight:bold;
  color:#fff;
  cursor:pointer;
  box-shadow:0 4px 8px rgba(0,0,0,0.2);
  transition:transform 1s ease, top 1s ease, left 1s ease;
}

/* å›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes spin{
  0%{transform: rotate(0deg);}
  100%{transform: rotate(360deg);}
}
.ball.spin{
  animation:spin 1.5s linear infinite;
}

/* ç´ã¨ãƒãƒ³ãƒ‰ãƒ« */
.handle{
  width:80px;
  padding:8px 12px;
  background:#fff;
  border:2px solid #f90;
  border-radius:16px;
  text-align:center;
  font-weight:bold;
  cursor:pointer;
}

/* ã‚«ãƒ—ã‚»ãƒ«é–‹ãã‚¢ãƒ‹ãƒ¡ */
.ball.open{
  animation:openBall 0.6s forwards;
}
@keyframes openBall{
  0% {transform: scale(1);}
  50% {transform: scale(1.2) rotate(20deg);}
  100% {transform: scale(1) rotate(0deg);}
}

/* å½“ãŸã‚Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
.message{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0);
  font-size:24px;
  font-weight:bold;
  color:#f90;
  background:rgba(255,255,255,0.9);
  padding:16px 24px;
  border-radius:16px;
  text-align:center;
  pointer-events:none;
  z-index:10;
  transition:transform 0.5s ease, opacity 0.5s ease;
}
.message.show{
  transform:translate(-50%,-50%) scale(1);
  opacity:1;
}
</style>
</head>
<body>

<div class="box" id="box"></div>
<div class="handle" id="handle">ã‚¬ãƒãƒ£ã‚’å›ã™</div>
<div class="message" id="message">ğŸ‰ å½“ãŸã‚Šï¼ğŸ‰</div>

<script>
const box = document.getElementById('box');
const handle = document.getElementById('handle');
const message = document.getElementById('message');

const prizes = ["ğŸ«","ğŸ­","ğŸ¥¤","ğŸ","ğŸª","ğŸŠ"];
let balls = [];

// ãƒœãƒ¼ãƒ«ä½œæˆã¨ãƒ©ãƒ³ãƒ€ãƒ é…ç½®
function createBalls(){
  prizes.forEach(p=>{
    const ball = document.createElement('div');
    ball.className='ball spin';
    ball.textContent=p;
    randomPosition(ball);
    box.appendChild(ball);
    balls.push(ball);
  });
}

function randomPosition(ball){
  const top = Math.random()*140 + 30;
  const left = Math.random()*200 + 20;
  const rot = Math.random()*60-30;
  ball.style.top = top + 'px';
  ball.style.left = left + 'px';
  ball.style.transform = `rotate(${rot}deg)`;
}

// ã‚¬ãƒãƒ£å®Ÿè¡Œ
handle.addEventListener('click',()=>{
  if(balls.length===0) return;
  // ãƒ©ãƒ³ãƒ€ãƒ ã§1å€‹é¸æŠ
  const idx = Math.floor(Math.random()*balls.length);
  const ball = balls[idx];
  balls = balls.filter((b,i)=>i!==idx);

  // ç´ã§ä¸Šã«ç§»å‹•
  const boxRect = box.getBoundingClientRect();
  const ballRect = ball.getBoundingClientRect();
  const offsetY = - (ballRect.top - boxRect.top) - 100;
  ball.style.transition = 'transform 1s ease, top 1s ease, left 1s ease';
  ball.style.top = parseFloat(ball.style.top) + offsetY + 'px';

  // ç´å¼•ãå¾Œã«é–‹ãã‚¢ãƒ‹ãƒ¡
  setTimeout(()=>{
    ball.classList.remove('spin');
    ball.classList.add('open');
  },1000);

  // é–‹ã„ãŸå¾Œã«å½“ãŸã‚Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  setTimeout(()=>{
    message.textContent = `ğŸ‰ ${ball.textContent} ãŒå½“ãŸã‚Šï¼ğŸ‰`;
    message.classList.add('show');
    // 2ç§’å¾Œã«æ¶ˆãˆã‚‹
    setTimeout(()=>message.classList.remove('show'),2000);
    // ç§»å‹•æ¸ˆã¿ã®ãƒœãƒ¼ãƒ«ã¯æ®‹ã—ã¦ãŠã
  },1600);
});

createBalls();
</script>

</body>
</html>
