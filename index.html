<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coffee Pass</title>
  <style>
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f7f3f0;
      color: #3b2c22;
      min-height: 100vh;
    }
    .container {
      width: 100%;
      max-width: 400px;
      margin: auto;
      padding: 20px;
      box-sizing: border-box;
    }
    .page {
      display: none;
      flex-direction: column;
      align-items: center;
      width: 100%;
      padding-top: 60px;
      padding-bottom: 20px;
    }
    .page.active { display: flex; }

    header {
      width: 100%;
      max-width: 400px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: bold;
      color: #5a463b;
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      background: #f7f3f0;
      z-index: 100;
    }

    /* ハンバーガーメニュー */
    .hamburger {
      position: absolute;
      left: 15px;
      top: 12px;
      width: 30px;
      height: 25px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      z-index: 150;
    }
    .hamburger span {
      display: block;
      height: 4px;
      background: #5a463b;
      border-radius: 2px;
    }

    /* サイドメニュー */
    .side-menu {
      position: fixed;
      top: 0;
      left: -250px;
      width: 200px;
      height: 100%;
      background: white;
      box-shadow: 2px 0 5px rgba(0,0,0,0.2);
      padding: 60px 15px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 15px;
      transition: left 0.3s ease;
      z-index: 200;
    }
    .side-menu.active { left: 0; }

    .side-menu button {
      background: none;
      border: none;
      font-size: 1rem;
      color: #5a463b;
      text-align: left;
      cursor: pointer;
      padding: 10px;
    }
    .side-menu button:hover {
      background: #f0e9e5;
      border-radius: 8px;
    }

    /* メニュー開いた時のオーバーレイ */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      display: none;
      z-index: 100;
    }
    .overlay.active { display: block; }

    /* 共通 */
    h2 {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #5a463b;
    }
    .back-btn {
      align-self: flex-start;
      margin-bottom: 10px;
      background: none;
      border: none;
      color: #5a463b;
      font-size: 0.9rem;
      font-weight: bold;
      cursor: pointer;
    }
    .back-btn:hover { text-decoration: underline; }
    input {
      width: 80%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button.main {
      background-color: #5a463b;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }
    button.main:hover { background-color: #3b2c22; }
    a { color: #5a463b; cursor: pointer; }
  </style>
</head>
<body>

<div class="container">
  <header>
    <div class="hamburger" onclick="toggleMenu()">
      <span></span><span></span><span></span>
    </div>
    Coffee Pass
  </header>

  <!-- ログインページ -->
  <div id="login-page" class="page active">
    <h2>ログイン</h2>
    <input type="text" id="username" placeholder="ユーザー名"><br>
    <input type="password" id="password" placeholder="パスワード"><br>
    <button class="main" onclick="login()">ログイン</button>
    <p id="login-error" style="color:red; display:none;">ユーザー名またはパスワードが違います</p>
    <p>新規の方は <a onclick="showPage('account-page')">こちらから登録</a></p>
  </div>

  <!-- ホーム -->
  <div id="home-page" class="page">
    <button class="back-btn" onclick="logout()">← ログアウト</button>
    <h2>ホーム</h2>
    <div class="ticket-balance">
      <h3>残りチケット</h3>
      <div class="count">7</div>
    </div>
  </div>

  <!-- 会員カード -->
  <div id="card-page" class="page">
    <button class="back-btn" onclick="showPage('home-page')">← ホームに戻る</button>
    <h2>会員カード</h2>
    <p><strong>会員名：</strong> <span id="member-name">guest</span></p>
    <p><strong>会員番号：</strong> <span id="member-id">000123</span></p>
    <img id="member-qr" src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=MEMBER_guest" alt="会員QR">
  </div>

  <!-- 会員登録変更 -->
  <div id="account-page" class="page">
    <button class="back-btn" onclick="showPage('home-page')">← ホームに戻る</button>
    <h2>会員登録 / 情報変更</h2>
    <input type="text" id="new-username" placeholder="新しいユーザー名"><br>
    <input type="password" id="new-password" placeholder="新しいパスワード"><br>
    <button class="main" onclick="updateAccount()">登録 / 更新</button>
    <p id="update-message" style="color:green; display:none;">登録情報を更新しました</p>
  </div>

  <!-- 利用履歴 -->
  <div id="history-page" class="page">
    <button class="back-btn" onclick="showPage('home-page')">← ホームに戻る</button>
    <h2>利用履歴</h2>
    <ul>
      <li>2024.03.10 -1枚 (Cafe Mocha)</li>
      <li>2024.03.05 -1枚 (Cafe Latte)</li>
    </ul>
  </div>
</div>

<!-- サイドメニュー -->
<div class="side-menu" id="sideMenu">
  <button onclick="showPage('home-page'); closeMenu()">ホーム</button>
  <button onclick="showPage('card-page'); closeMenu()">会員カード</button>
  <button onclick="showPage('account-page'); closeMenu()">会員登録変更</button>
  <button onclick="showPage('history-page'); closeMenu()">利用履歴</button>
  <button onclick="logout(); closeMenu()">ログアウト</button>
</div>
<div class="overlay" id="overlay" onclick="closeMenu()"></div>

<script>
  let account = { username: "guest", password: "123", memberId: "000123" };

  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
  }

  function login() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    if (user === account.username && pass === account.password) {
      showPage("home-page");
      document.getElementById("login-error").style.display = "none";
      document.getElementById("member-name").textContent = account.username;
      document.getElementById("member-id").textContent = account.memberId;
      document.getElementById("member-qr").src =
        `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=MEMBER_${account.username}`;
    } else {
      document.getElementById("login-error").style.display = "block";
    }
  }

  function logout() {
    showPage("login-page");
  }

  function updateAccount() {
    const newUser = document.getElementById("new-username").value;
    const newPass = document.getElementById("new-password").value;
    if (newUser && newPass) {
      account.username = newUser;
      account.password = newPass;
      account.memberId = String(Math.floor(Math.random() * 1000000)).padStart(6,"0");
      document.getElementById("update-message").style.display = "block";
      setTimeout(() => { document.getElementById("update-message").style.display = "none"; }, 2000);
    }
  }

  function toggleMenu() {
    document.getElementById("sideMenu").classList.toggle("active");
    document.getElementById("overlay").classList.toggle("active");
  }

  function closeMenu() {
    document.getElementById("sideMenu").classList.remove("active");
    document.getElementById("overlay").classList.remove("active");
  }
</script>
</body>
</html>
